# SurvivorRogue

小米修改apk
https://mbd.baidu.com/newspage/data/dtlandingsuper?nid=dt_3136650372729571178

# 设计

![image.png](SurvivorRogue%203d87a547bb4844f89fa98edb9f2efab7/image.png)

人物强度与等级挂钩。怪物强度与波次挂钩。

武器可以升级：白→蓝→紫→橙

经验值增加系统

更新buff

1. 什么都不变
2. 直接替换一个新的
3. 对原有的进行修改

商店刷新

先判断是什么等级

再看是道具还是武器，如果这个等级没有道具了，那么只生成武器

存档设计

在开启新游戏之前会选择一个存档位置，此时会先进行一次初始存档。

主动存档：只有在商店界面，即一个波次结束后可以进行存档。（最好是展示存档中的Panel）

退出游戏的自动存档：在游戏中或者是开宝箱界面退出游戏，将不会进行存档。当在商店界面退出游戏，会自动进行存档。

存档展示

存档时间、选择的角色、玩家等级、游玩时间、当前波次、是否是无尽模式、钱的数量。

存档需要记录的数据

gameData，当前商店的道具，当前玩家拥有的buff

音乐

bgm：主界面、商店界面、游戏界面

Audio：按钮点击，

## 波次设计

一共20波，20波次完成后通关，但是可以游玩无尽模式。

wave：第wave波

delaySpawnTime：经过spawnTime后生成

enemyID：生成敌人ID

count：生成个数

spawnType：生成类型（水平，垂直，圆圈）

spawnInterval：生成间隔（间隔生成一次）

randomPosition：生成位置是否随机

generatePosition：生成的位置

horizentalInterval：水平间隔

verticalInterval：垂直间隔

radius：半径

根据波次提高怪物的数值，暂定波次一共20波（10，20波次时出现boss）

delaySpawnTime>(position/random(r))[spawnType(params)[<spawnInterval>]-count][<recycleInterval>recycleCount]

delaySpawnTime，表示在波次开始的delaySpawnTime后生成

[<spawnInterval>]，默认0

[spawnType(params)-count] ，默认none-1

[<recycleInterval>recycleCount]，默认<0>1

spawnType有5种，分别是none，horizental(horizentalInterval)，vertical(verticalInterval)，circle(radius)，rect(halfWidth,halfHeight)

> wave 1
> 

妖怪书（10>(random)rect(2,2)<0.2>-5<5>10）50

蘑菇怪人（10>(0,11)，30>(-10,-7)，50>(10,7)）15

> wave 2
> 

蘑菇怪人（10>(r)<20>3）15

妖怪书（1>(0,0)circle(8)-8 ， 10>(random)vertical(1.5)-5<5>2，40>(r)rect(2,2)<0.2>-4<5>4）34

骷髅怪（20>(r)rect(2,2)<0.2>-3<5>6）18

> wave 3
> 

蘑菇怪人（10>(r)<20>3）15

**妖怪书 3**

2>(9,7)circle(6)-6
10>(r)vertical(1)-5<5>2
30>(r)rect(3,2)-4<10>3

**骷髅怪 1**

5>(r)none-3
20>(9,7)horizontal(2)-4<5>3
30>(r)circle(4)-6<10>3

**尖刺蜗牛 2**

10>(r)rect(3,3)-5<6>3
25>(0,-7)vertical(2)-4<7>4
45>(r)none<1>-8

> wave 4
> 

蘑菇怪人（10>(r)<20>3）15

**妖怪书 3**

2>(-10,5)circle(5)<0.5>-6
12>(r)vertical(1)<0.5>-5<6>2
30>(r)rect(3,2)<0.5>-4<10>2

**骷髅怪 1**

5>(r)none-3
20>(-5,5)horizontal(2)<0.3>-4<5>2
35>(r)circle(4)<0.5>-6

**尖刺蜗牛 2**
10>(r)rect(3,3)<0.4>-5<6>2
25>(10,-10)vertical(2)<0.5>-4
45>(r)none<0.5>-8

**蝙蝠群 4**

3>(0,0)circle(4)<1>-10
15>(r)horizontal(1.5)-6
40>(5,-5)rect(3,3)<1>-5

> wave 5
> 

蘑菇怪人（10>(r)<10>5）15

**骷髅怪 1**

5>(r)none-5
20>(-5,5)horizontal(2)<0.3>-5<5>2
35>(r)circle(5)-6
50>(r)none-3

**尖刺蜗牛 2**

10>(r)rect(4,4)<0.4>-6
25>(10,-10)vertical(2)<0.5>-6
45>(r)none-9

**妖怪书 3**

2>(-10,5)circle(6)<0.5>-8
12>(r)vertical(1.5)-7<5>2
32>(r)none-4

**蝙蝠群 4**

3>(0,0)circle(5)<1>-12
15>(r)horizontal(1.5)-8
40>(5,-5)rect(3,3)-6

> wave 6
> 

蘑菇怪人（10>(r)<20>3）15

**骷髅怪 1**

5>(r)none-6
20>(-5,5)horizontal(2)<0.3>-7
40>(r)rect(3,3)-6

**妖怪书 3**

2>(-10,5)circle(6)<0.5>-9
12>(r)vertical(1.5)-8<5>2
32>(r)none-5
50>(r)none-4

**蝙蝠群 4**

3>(0,0)circle(5)<1>-12
15>(r)horizontal(1.5)-10
35>(r)none-8

> wave 7
> 

蘑菇怪人（10>(r)<20>3）15

**骷髅怪 1**

5>(r)none-6<2>3
20>(5,-5)horizontal(2)<0.3>-7
40>(-3,-3)rect(3,3)-8<5>2
55>(0,0)none-3

**尖刺蜗牛 2**

4>(2,3)circle(4)<1>-8
18>(r)rect(4,3)-6<3>2
34>(r)none<0.5>-7
50>(-8,6)vertical(2)-5<4>2

**蝙蝠群 4**

3>(0,0)circle(5)<1>-10
12>(r)horizontal(1.5)-12<4>2
32>(6,2)none-8<2>3
45>(r)none-6

> wave 8
> 

蘑菇怪人（10>(r)<20>3）15

**骷髅怪 1**

4>(r)none-5
20>(3,4)circle(4)<1>-7
34>(r)rect(4,3)-6<4>2
48>(-4,-5)vertical(2)-5

**尖刺蜗牛 2**

2>(0,0)circle(5)<0.8>-10
14>(r)none-6<3>2
30>(-6,2)horizontal(2)<0.5>-8

**妖怪书 3**

1>(-10,5)circle(6)<0.5>-9
12>(r)vertical(1.5)-8<4>3
32>(5,-3)none<1.2>-7
50>(r)none-6

> wave 9
> 

蘑菇怪人（10>(r)<20>3）15

**尖刺蜗牛 2**

3>(0,0)circle(6)<1>-10
15>(r)none-8<3>2
32>(-6,2)horizontal(1.5)<0.5>-9
45>(r)none-6

**妖怪书 3**

1>(-8,6)circle(5)<0.7>-10
14>(r)horizontal(2)-9<5>2
30>(6,-4)none<1>-7
48>(r)none-6

**蝙蝠群 4**

2>(3,-3)circle(4)<0.8>-12
18>(r)vertical(1.5)-10<4>2
35>(0,0)none<1.5>-7
50>(r)none-8

> wave 10
> 

蘑菇怪人（5>(r)<8>6）

boss 5>(0,5)

**骷髅怪 1**

3>(r)none-10
18>(4,-4)circle(4)<1>-12
34>(r)rect(4,3)-15<3>2
50>(-3,3)vertical(1.5)-10<2>2

**尖刺蜗牛 2**

2>(0,0)circle(6)<0.8>-14
20>(r)none-10<2>3
32>(-6,2)horizontal(1.5)<0.5>-10
48>(r)none-12

**妖怪书 3**

1>(-5,5)circle(5)<0.5>-12
12>(r)vertical(1.5)-10<4>3
28>(7,-7)horizontal(2)<1>-10
45>(0,0)none-15

**蝙蝠群 4**

1>(3,-3)circle(4)<0.8>-18
14>(r)vertical(1.5)-15<4>3
35>(0,0)none<1>-12
50>(r)none-14

> wave 11
> 

蘑菇怪人（10>(r)<12>4）

**骷髅怪 1**

3>(r)none<1>-10
20>(5,-5)circle(3)<1>-12
34>(r)rect(3,3)-8<2>3

**尖刺蜗牛 2**

1>(0,0)circle(6)<0.8>-12
18>(r)none-8<2>3
32>(-6,2)horizontal(1.5)<0.5>-10
48>(r)none-10

**妖怪书 3**

2>(-6,6)circle(4)<0.7>-10
12>(r)vertical(1.5)-8<3>2
28>(8,-8)horizontal(2)<1>-10
45>(r)none-12

**机械枪兵 7**

5>(r)none-5
25>(4,4)vertical(1.5)-6<2>2
40>(r)none-4

> wave 12
> 

蘑菇怪人（10>(r)<12>4）

**骷髅怪 1**

1>(0,0)none-10
14>(-4,4)circle(4)<1>-12
32>(r)rect(4,3)-15<2>2

**尖刺蜗牛 2**

3>(r)none<0.7>-12
18>(5,-5)circle(6)<1>-10
30>(-6,2)horizontal(1.5)-8<2>2
50>(r)none-10

**机械蚯蚓 6**

2>(6,-6)circle(5)<1>-6
20>(r)vertical(2)-4<3>2
38>(-8,8)horizontal(3)<1.5>-5

**机械枪兵 7**

4>(r)none<1>-8
22>(4,4)vertical(1.5)-10<2>2
40>(r)none-6

> wave 13
> 

蘑菇怪人（10>(r)<12>4）

**骷髅怪 1**

1>(0,0)none-12
15>(-4,4)circle(4)<1>-15
32>(r)rect(4,3)-10<2>2

**机械蚯蚓 6**

2>(4,-4)circle(5)<1>-8
16>(r)vertical(2)-6<3>2
34>(-6,6)horizontal(1.5)<1.5>-10

**机械枪兵 7**

5>(r)none<1>-8
20>(4,4)vertical(1.5)-12<2>2
36>(r)none-8

**电眼仔 8**

3>(r)none-6
22>(6,-6)horizontal(2)-5<2>2
40>(r)none-4

> wave 14
> 

蘑菇怪人（10>(r)<12>4）

**尖刺蜗牛 2**

3>(-5,5)circle(6)<0.7>-12
18>(4,-4)none-8
30>(r)horizontal(1.5)-10<1>2

**机械蚯蚓 6**

2>(6,-6)circle(5)<1>-6
16>(r)vertical(2)-8<1.5>2
34>(-8,8)horizontal(2.5)-7

**机械枪兵 7**

5>(r)none<1>-8
22>(4,4)vertical(1.5)-12<2>2
36>(r)none-10

**电眼仔 8**

4>(r)none<1>-10
20>(3,3)horizontal(2)-6<2>2
40>(r)none-8

> wave 15
> 

蘑菇怪人（10>(r)<12>4）

**妖怪书 3**

1>(-3,3)circle(5)<1>-10
12>(r)none-8
30>(4,-4)vertical(2)-6<2>2

**机械蚯蚓 6**

2>(6,-6)circle(4)<1>-12
18>(r)horizontal(1.5)-8<2>2
34>(-8,8)none-6

**机械枪兵 7**

5>(r)none<1>-8
22>(4,4)horizontal(2)-10<2>2
36>(r)none-10

**电眼仔 8**

4>(r)none<1>-10
20>(3,3)vertical(1.5)-5<1.5>2
40>(r)none-8

> wave 16
> 

蘑菇怪人（10>(r)<10>5）

**蝙蝠群 4**

1>(2,2)circle(6)<0.5>-15
12>(r)none<0.7>-10
30>(0,0)horizontal(2)-12<2>2

**机械蚯蚓 6**

3>(5,-5)circle(5)<1>-10
18>(r)vertical(2)-8<1.5>2
34>(-6,6)none-6

**机械枪兵 7**

7>(r)none<1>-8
22>(-4,-4)vertical(2)-10<2>2
36>(r)none-12

**电眼仔 8**

5>(r)none<1>-10
20>(4,4)horizontal(1.5)-8<1.5>2
40>(r)none-10

> wave 17
> 

蘑菇怪人（10>(r)<10>5）

**妖怪书 3**

1>(-2,2)circle(5)<1>-10
10>(r)none-8
25>(3,-3)vertical(1.5)-5<1.5>2

**蝙蝠群 4**

18>(r)none<0.7>-10
35>(-3,-3)horizontal(2)-12<2>2

**机械蚯蚓 6**

2>(4,-4)circle(4)<1>-10
20>(r)vertical(2)-8<1.5>2
38>(-5,5)none-6

**机械枪兵 7**

7>(r)none<1>-8
24>(-4,-4)vertical(2)-10<2>2

**电眼仔 8**

5>(r)none<1>-10
22>(4,4)horizontal(1.5)-8<1.5>2

> wave 18
> 

蘑菇怪人（10>(r)<10>5）

**骷髅怪 1**

2>(r)none<1.5>-5<3>3
20>(-3,3)rect(2,2)<2>-6<3>3
40>(4,-4)none-4

**妖怪书 3**

1>(0,0)circle(4)<1>-8<2>2
18>(r)none-10
38>(-2,-2)vertical(1.5)-6<2>2

**蝙蝠群 4**

3>(1,1)circle(5)<1>-10<3>3
22>(r)none<1.5>-8
45>(-4,4)horizontal(2)-6<2>2

**机械蚯蚓 6**

4>(2,-2)circle(4)<1>-8<2>2
16>(r)vertical(1.5)-7<2>3
35>(-5,5)none-5

**机械枪兵 7**

6>(r)none<1.5>-6<3>3
28>(-3,-3)vertical(2)-5<2>2
48>(r)none-7

**电眼仔 8**

5>(r)none<1>-8<3>3
25>(3,3)horizontal(1.5)-6<1.5>2
42>(r)none-8

> wave 19
> 

蘑菇怪人（10>(r)<10>5）

**骷髅怪 1**

2>(r)none<2>-5<4>4
20>(-3,3)rect(2,2)<3>-4<3>3
40>(4,-4)none-3<2>2

**尖刺蜗牛 2**

3>(r)none<1.5>-6<4>4
22>(1,1)horizontal(1.5)-5<2>3

**妖怪书 3**

4>(0,0)circle(4)<2>-8<3>3
18>(r)none<2.5>-6<3>3

**蝙蝠群 4**

5>(1,1)circle(5)<1>-6<4>4
28>(r)none<2>-8<3>3

**机械蚯蚓 6**

6>(2,-2)circle(4)<2>-7<3>3
35>(r)vertical(1.5)-6<2>3

**机械枪兵 7**

10>(r)none<2>-4<3>3
30>(-3,-3)vertical(2)-5<2>3

**电眼仔 8**

8>(r)none<1.5>-5<4>4
25>(3,3)horizontal(2)-4<2>3

> wave 20
> 

蘑菇怪人（10>(r)<7>7）

boss 5>(r)<20>2

**骷髅怪 1**

1>(r)none-5<10>5

**尖刺蜗牛 2**

2>(r)none-5<10>5

**妖怪书 3**

3>(r)none-5<10>5

**蝙蝠群 4**

4>(r)none-5<10>5

**机械蚯蚓 6**

5>(r)none-5<10>5

**机械枪兵 7**

6>(r)none-5<10>5

**电眼仔 8**

7>(r)none-5<10>5

> 无尽模式普通关 1
> 

蘑菇怪人10>(r)<20>2

**机械蚯蚓 6**

1>(r)none<0.5>-10<6>10

**机械枪兵 7**

3>(r)none<0.5>-10<6>10

**电眼仔 8**

5>(r)none<0.5>-10<6>10

> 无尽模式普通关 2
> 

蘑菇怪人10>(r)<20>2

**骷髅怪 1**

1>(r)none<0.5>-10<6>10

**尖刺蜗牛 2**

3>(r)none<0.5>-10<6>10

**妖怪书 3**

5>(r)none<0.5>-10<6>10

**蝙蝠群 4**

7>(r)none<0.5>-10<6>10

> 无尽模式普通关 3
> 

蘑菇怪人10>(r)<20>2

**骷髅怪 1**

1>(r)none<1>-5<6>10

**尖刺蜗牛 2**

2>(r)none<1>-5<6>10

**妖怪书 3**

3>(r)none<1>-5<6>10

**蝙蝠群 4**

4>(r)none<1>-5<6>10

**机械蚯蚓 6**

5>(r)none<1>-5<6>10

**机械枪兵 7**

6>(r)none<1>-5<6>10

**电眼仔 8**

7>(r)none<1>-5<6>10

> 无尽模式单boss关
> 

蘑菇怪人10>(r)<20>2

boss 5>(0,0)

**骷髅怪 1**

1>(r)rect(3,3)-5<10>5

**尖刺蜗牛 2**

2>(0,0)circle(5)-10<10>5

**妖怪书 3**

3>(r)none-10<10>5

**蝙蝠群 4**

4>(r)none-10<10>5

**机械蚯蚓 6**

5>(r)none-10<10>5

**机械枪兵 7**

6>(r)horizental(2)-5<10>5

6>(r)vertical(2)-5<10>5

**电眼仔 8**

7>(0,0)circle(6)-10<10>5

> 无尽模式双boss关
> 

蘑菇怪人10>(r)<20>2

boss 5>(r)<20>2

**骷髅怪 1**

1>(r)rect(3,3)-5<10>5

**尖刺蜗牛 2**

2>(0,0)circle(5)-10<10>5

**妖怪书 3**

3>(r)none-10<10>5

**蝙蝠群 4**

4>(r)none-10<10>5

**机械蚯蚓 6**

5>(r)none-10<10>5

**机械枪兵 7**

6>(r)horizental(2)-5<10>5

6>(r)vertical(2)-5<10>5

**电眼仔 8**

7>(0,0)circle(6)-10<10>5

## 人物设计

基础属性（随等级变化的东西）

生命，攻击速度，力量，智力，防御，闪避，暴击率，暴击伤害，移动速度，幸运。

等级无最大值

> 属性范围设置
> 

|  | **生命** | **攻速** | **力量** | **智力** | **防御** | **闪避** | **暴击率** | **暴击伤害** | **移速** | **幸运** |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 范围 | >0 | (0,250) | 任意 | 任意 | ≥0 | [0,25] | [0,30] | ≥100 | (0,250) | 任意 |

基础数值

|  | **生命** | **攻速** | **力量** | **智力** | **防御** | **闪避** | **暴击率** | **暴击伤害** | **移速** | **幸运** |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| S | 300+ | 110+ | 50+ | 50+ | 30+ | 10+ | 10+ | 170+ | 120+ | 10+ |
| A | 250+ | 105+ | 40+ | 40+ | 20+ | 7+ | 7+ | 160+ | 110+ | 7+ |
| B | 200+ | 100+ | 25+ | 25+ | 10+ | 5+ | 5+ | 150+ | 100+ | 5+ |
| C | 150+ | 90+ | 10+ | 10+ | 5+ | 3+ | 3+ | 130+ | 90+ | 2+ |
| D | 100+ | 90- | 0+ | 0+ | 0+ | 0+ | 0+ | 110+ | 80+ | 0+ |

升级增加

|  | **生命** | **攻速** | **力量** | **智力** | **防御** | **闪避** | **暴击率** | **暴击伤害** | **移速** | **幸运** |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| S | 50+ | 1+ | 20+ | 20+ | 7+ | 1+ | 1+ | 2+ | 2+ | 8+ |
| A | 35+ | 0.5+ | 15+ | 15+ | 5+ | 0.5+ | 0.5+ | 1+ | 1+ | 4+ |
| B | 20+ | 0+ | 10+ | 10+ | 2+ | 0+ | 0+ | 0+ | 0+ | 2+ |
| C | 5+ | 0- | 5+ | 5+ | 2- | 0.5- | 0.5- | 1- | 1- | 1+ |
| D | 5- | 0.5- | 5- | 5- | 0- | 1- | 1- | 2- | 2- | 1- |

luck [,1000]

攻速：所有的武器都会受到攻速这个属性的影响，武器的攻速  *= `攻击速度/100` 

幸运属性影响商店刷新的品质、敌人掉落金币和道具的概率。

商店刷新和等级以及幸运这一属性有关。

| 等级 | ≤3 | ≤5 | ≤8 | ≤10 | ≤13 | ≤15 | ≤18 | ≤20 | >20 | 幸运 |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| **传说** |  |  |  |  |  |  |  |  |  | +(luck/500) |
| **史诗** |  |  |  |  |  |  |  |  |  | +(luck/250) |
| **稀有** |  |  |  |  |  |  |  |  |  | -(luck/250) |
| **普通** |  |  |  |  |  |  |  |  |  | -(luck/500) |
| **武器** |  |  |  |  |  |  |  |  |  |  |
| **道具** |  |  |  |  |  |  |  |  |  |  |

物品的掉落

金币

1.5倍：luck/1000

2倍：luck/2000

血瓶 (rate) + (luck/1000)

宝箱（稀有） (rate) + (luck/1000)

宝箱（史诗） (rate) + (luck/2000)

宝箱（传说） (rate) + (luck/4000)

### 魔法师

> 人物介绍
> 

传说的勇者小队中的魔法师，是一位活了数千年的精灵，最喜欢的事情就是收集各种各样的魔法。实力强劲，天资优异。性格淡漠，看起来不近人情，实际是比较慢热。有点毒舌，睡姿很差，对人类的情感反应比较迟钝。
智力：<color="#FFA500">S</color>
暴击伤害：<color="#FFA500">S</color>

> 数值
> 

| **生命** | **攻速** | **力量** | **智力** | **防御** | **闪避** | **暴击率** | **暴击伤害** | **移速** | **幸运** |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 150 | 100 | 5 | 60 | 6 | 5 | 5 | 170 | 100 | 5 |
| 10 | 0 | 1 | 25 | 2 | 0 | 0.1 | 2 | 0 | 2 |
| C | B | D | S | C | B | B | S | B | B |

定位：法师，智力 = 暴击伤害 

> 技能
> 

<b><color="#FF0000">星落</color></b>
召唤星星撞击地面，对范围内的敌人持续造成<color="#FFA500">较小</color>的伤害。

> 被动
> 

<b><color="#FF0000">防御魔法</color></b>
当生命值降低至<color="#FF0000">20%</color>以下时。生成一个持续<color="#FFA500">2s</color>的可以<color="#FFA500">抵御所有攻击</color>的护盾，

### 勇者

> 人物介绍
> 

来自北方诸国的传奇勇者，传言他拔出了勇者之剑，开启了注定不凡的冒险旅程。在这段旅途中，他先后招募了强大的法师、勇猛的战士和虔诚的僧侣。他们共同历经了十年的风雨，最终凭借无与伦比的勇气和智慧，成功击败了可怕的魔王。
力量：<color="#FFA500">S</color>
生命：<color="#B000FF">A</color>

> 数值
> 

| **生命** | **攻速** | **力量** | **智力** | **防御** | **闪避** | **暴击率** | **暴击伤害** | **移速** | **幸运** |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 250 | 100 | 50 | 5 | 20 | 5 | 5 | 150 | 100 | 5 |
| 35 | 0 | 20 | 1 | 5 | 0 | 0.1 | 0.5 | 0 | 2 |
| A | B | S | D | A | B | B | B | B | B |

定位：战士，力量 > 生命 > 移速

> 技能
> 

<b><color="#FF0000">旋风斩击</color></b>
挥舞勇者之剑，对周围的敌人造成<color="#FFA500">大量</color>伤害。

> 被动
> 

<b><color="#FF0000">背水一战</color></b>
陷入困境时，总能爆发出全部的力量。当血量小于等于<color="#FF0000">20%</color>时，伤害增加<color="#FFA500">50%</color>，之后血量每减少<color="#FF0000">5%</color>，伤害增加<color="#FFA500">50%</color>。

## 怪物设计

基础属性（随波次变化的东西）

生命，防御，移动速度，攻击，（攻速）

怪物死亡会掉落金币、回血球、或者是普通/史诗/传说宝箱。

EnemyTpl 

### 妖怪书（1）

### 骷髅怪（2）

介绍：亡者的战士，带着不死的执念游荡在战场上。它可以毫不犹豫地将自己的脑袋扯下，作为致命的投掷武器。也会它会用脑袋猛击对手，粉碎敌人。

血量：

防御：

移速：

攻击：

两种攻击方式，投掷脑袋，锤地面

### 蝙蝠群（4）

### 尖刺蜗牛（3）

移速：20

待机，发射尖刺，移动，死亡

### 蘑菇怪人（1）

在玩家没有接近的时候，随机游荡，玩家接近后，远离玩家方向奔跑，并开始计时，当时间超过10s后，爆炸

### 电眼仔（13）

### 机械蚯蚓（12）

会钻入地下

处于近战攻击范围，直接攻击，未进入视野，idle，进入视野，如果可以dive，看和玩家的距离，近则跑，远则追。不可以dive，什么都不做。

### 机械枪兵（11）

### boss变异甲虫（10，20）

吼叫：造成伤害，击退，（3s的额外收到伤害debuff）

滚动冲击：快速滚动5次，每次朝向玩家方向冲刺2s

尖刺飞弹：发射尖刺，发射5次，每次发射12个尖刺，发射完毕后旋转一定角度再次发射。5次发射结束，进入疲劳，疲劳2s。尖刺命中玩家添加每秒流血的debuff，持续三秒。

泰山压顶：向空中跃起，并落下，对落下位置造成范围伤害，追踪玩家位置落下，并击退

## 武器设计

等级：白，蓝，紫，橙

攻速（每秒多少下）：很慢，慢，中等，快，很快

范围：近战，远程

武器描述：造成…伤害

### 深渊巨斧

```
攻击：<color="#44BF19">15+4%</color>最大生命
攻速：<color="#44BF19">0.5/color>次/秒
范围：<color="#44BF19">小</color>
<color="#44BF19">略微变大</color>后<color="#44BF19">横扫</color>敌人

攻击：<color="#44BF19">40+8%</color>最大生命
攻速：<color="#44BF19">0.6/color>次/秒
范围：<color="#44BF19">小</color>
<color="#44BF19">变大</color>后<color="#44BF19">横扫</color>敌人

攻击：<color="#44BF19">130+12%</color>最大生命
攻速：<color="#44BF19">0.75/color>次/秒
范围：<color="#44BF19">较小</color>
<color="#44BF19">变的特大</color>后<color="#44BF19">横扫</color>敌人

攻击：<color="#44BF19">380+16%</color>最大生命
攻速：<color="#44BF19">0.9</color>次/秒
范围：<color="#44BF19">较小</color>
<color="#44BF19">变的最大</color>后<color="#44BF19">横扫一圈</color>敌人
```

**深渊巨斧-水银**

等级：白色

攻速：0.5

范围：0.6

攻击：15(+4%生命)

描述：

微微变大2.5后横扫敌人

**深渊巨斧-寒锋**

等级：蓝色

攻速：0.6

范围：0.75

攻击：40( +8%生命)

描述：

变大3后横扫敌人

**深渊巨斧-炫富**

等级：紫色

攻速：0.75

范围：1

攻击：130( +12% 生命)

描述：

变的巨大4后横扫敌人

**深渊巨斧-烈焰**

等级：橙色

攻速：0.9

范围：1.25

攻击：380( +16%生命)

描述：

变得最大5后，横扫一圈的敌人

### 霸王弓

```
攻击：<color="#44BF19">5+15%</color>力量+<color="#44BF19">15%</color>智力
攻速：<color="#44BF19">0.8</color>次/秒
范围：<color="#44BF19">较大</color>
同时向前方发射<color="#44BF19">3</color>支箭矢

攻击：<color="#44BF19">15+20%</color>力量+<color="#44BF19">20%</color>智力
攻速：<color="#44BF19">1.2</color>次/秒
范围：<color="#44BF19">较大</color>
同时向前方发射<color="#44BF19">5</color>支箭矢

攻击：<color="#44BF19">45+30%</color>力量+<color="#44BF19">30%</color>智力
攻速：<color="#44BF19">1.6</color>次/秒
范围：<color="#44BF19">大</color>
同时向前方发射<color="#44BF19">7</color>支箭矢

攻击：<color="#44BF19">135+50%</color>力量+<color="#44BF19">50%</color>智力
攻速：<color="#44BF19">2</color>次/秒
范围：<color="#44BF19">很大</color>
同时向前方发射<color="#44BF19">9</color>支箭矢
```

**霸王弓-布衣**

等级：白色

攻速：0.8

范围：2.5

攻击：5( +15% 力量+15%智力)

描述：

向前方射出三只箭矢

**霸王弓-游子**

等级：蓝色

攻速：1.2

范围：2.8

攻击：15( +20% 力量+20%智力)

描述：

向前方射出五只箭矢

**霸王弓-轩辕**

等级：紫色

攻速：1.6

范围：3

攻击：45( +30% 力量+30%智力)

描述：

向前方射出七只箭矢

**霸王弓-落日**

等级：橙色

攻速：2.0

范围：3.5

攻击：135( +50% 力量+50%智力)

描述：

向前方射出九只箭矢

### 正义铁锤

```
攻击：<color="#44BF19">30+15%</color>力量+<color="#44BF19">5%</color>最大生命
攻速：<color="#44BF19">0.3</color>次/秒
范围：<color="#44BF19">很小</color>
攻击产生波动，对范围内的所有敌人造成伤害，并<color="#44BF19">小力度</color>击退周围的敌人

攻击：<color="#44BF19">50+20%</color>力量+<color="#44BF19">8%</color>最大生命
攻速：<color="#44BF19">0.4</color>次/秒
范围：<color="#44BF19">很小</color>
攻击产生波动，对范围内的所有敌人造成伤害，并<color="#44BF19">中等力度</color>击退周围的敌人

攻击：<color="#44BF19">140+40%</color>力量+<color="#44BF19">10%</color>最大生命
攻速：<color="#44BF19">0.65</color>次/秒
范围：<color="#44BF19">小</color>
攻击产生波动，对范围内的所有敌人造成伤害，并<color="#44BF19">中等力度</color>击退周围的敌人

攻击：<color="#44BF19">400+70%</color>力量+<color="#44BF19">12%</color>最大生命
攻速：<color="#44BF19">0.65</color>次/秒
范围：<color="#44BF19">较小</color>
攻击产生波动，对范围内的所有敌人造成伤害，并<color="#44BF19">中等力度</color>击退周围的敌人
```

**正义铁锤-精钢**

等级：白色

攻速：0.3

范围：0.3

攻击：30( +15% 力量+5%生命)

描述：

攻击产生波动，对小范围内的所有敌人造成伤害，并击退周围的敌人

**正义铁锤-钻石**

等级：蓝色

攻速：0.4

范围：0.5

攻击：50( +20% 力量+8%生命)

描述：

攻击产生波动，对中等范围内的所有敌人造成伤害，并击退周围的敌人

**正义铁锤-合金**

等级：紫色

攻速：0.5

范围：0.8

攻击：140( +40% 力量+10%生命)

描述：

攻击产生波动，对大范围内的所有敌人造成伤害，并击退周围的敌人

**正义铁锤-翡翠**

等级：橙色

攻速：0.65

范围：1.0

攻击：400( +70% 力量+12%生命)

描述：

攻击产生波动，对特大范围内的所有敌人造成伤害，并击退周围的敌人

### 魔法师之杖

```
攻击：<color="#44BF19">8+20%</color>智力
攻速：<color="#44BF19">0.5</color>次/秒
范围：<color="#44BF19">较大</color>
可以同时对攻击范围内的最多<color="#44BF19">2</color>名敌人造成伤害。

攻击：<color="#44BF19">24+25%</color>智力
攻速：<color="#44BF19">0.8</color>次/秒
范围：<color="#44BF19">较大</color>
可以同时对攻击范围内的最多<color="#44BF19">3</color>名敌人造成伤害。

攻击：<color="#44BF19">72+40%</color>智力
攻速：<color="#44BF19">1.2</color>次/秒
范围：<color="#44BF19">较大</color>
可以同时对攻击范围内的最多<color="#44BF19">5</color>名敌人造成伤害。

攻击：<color="#44BF19">216+80%</color>智力
攻速：<color="#44BF19">1.5</color>次/秒
范围：<color="#44BF19">大</color>
可以同时对攻击范围内的最多<color="#44BF19">8</color>名敌人造成伤害。

```

**魔法师之杖-风**

等级：白色

攻速：0.5

范围：2.5

攻击：8( +20% 智力)

描述：

可以同时对攻击范围内的最多2名敌人造成伤害

**魔法师之杖-城**

等级：蓝色

攻速：0.8

范围：2.6

攻击：24( +25% 智力)

描述：

可以同时对攻击范围内的最多3名敌人造成伤害

**魔法师之杖-烟**

等级：紫色

攻速：1.2

范围：2.8

攻击：72( +40% 智力)

描述：

可以同时对攻击范围内的最多5名敌人造成伤害

**魔法师之杖-雨**

等级：橙色

攻速：1.5

范围：3

攻击：216( +80% 智力)

描述：

可以同时对攻击范围内的最多8名敌人造成伤害

### 勇者之剑

```
攻击：<color="#44BF19">10+20%</color>力量
攻速：<color="#44BF19">0.6</color>次/秒
范围：<color="#44BF19">中等</color>
每<color="#44BF19">4</color>次攻击，下一次就会以笔直向敌人射出，并穿透当前路径上的所有敌人。

攻击：<color="#44BF19">30+25%</color>力量
攻速：<color="#44BF19">1</color>次/秒
范围：<color="#44BF19">中等</color>
每<color="#44BF19">3</color>次攻击，下一次就会以笔直向敌人射出，并穿透当前路径上的所有敌人。

攻击：<color="#44BF19">90+40%</color>力量
攻速：<color="#44BF19">1.4</color>次/秒
范围：<color="#44BF19">中等</color>
每<color="#44BF19">2</color>次攻击，下一次就会以笔直向敌人射出，并穿透当前路径上的所有敌人。

攻击：<color="#44BF19">270+80%</color>力量
攻速：<color="#44BF19">1.7</color>次/秒
范围：<color="#44BF19">较大</color>
每<color="#44BF19">1</color>次攻击，下一次就会以笔直向敌人射出，并穿透当前路径上的所有敌人。
```

**勇者之剑-残**

等级：白色

攻速：0.6

范围：2

攻击：10( +20% strength)

描述：似乎继承了勇者的意志，会自己插入敌人的身体。

每4次攻击，下一次就会笔直的向敌人射出，并穿透当前路径上的所有敌人

**勇者之剑-忍**

等级：蓝色

攻速：1

范围：2.1

攻击：30( +25% strength)

描述：勇者的意志寄宿在剑内，自发的攻击敌人。

每3次攻击，下一次就会笔直的向敌人射出，并穿透当前路径上的所有敌人

**勇者之剑-静**

等级：紫色

攻速：1.2

范围：2.3

攻击：90( +40% strength)

描述：当勇者拔出这把剑时，周围所有的声音都消失了

每2次攻击，下一次就会笔直的向敌人射出，并穿透当前路径上的所有敌人

**勇者之剑-默**

等级：橙色

攻速：1.5

范围：2.5

攻击：270( +80% strength)

描述：勇者的灵魂已经和这把剑融为一体。

每1次攻击，下一次就会笔直的向敌人射出，并穿透当前路径上的所有敌人

## 道具设计

品阶：白（15-30），蓝（40-70），紫（120-160），橙（270-330）

描述，成长描述（智力+10，力量-10）

150 = 32 + 60 + 44 + 14

### **普通道具 28**

**一些通用的**

**生命宝石**：生命+30，闪避-2%

**生命铠甲**：生命+20，移速-2

**疾风之戒**：攻速+2，力量-3

**迅捷之刃**：攻击速度+1，暴击率-1%

**兽牙项链**：力量+4，防御-2

**力量护腕**：力量+3，智力-2

**古法师项链**：智力+4，暴击伤害-2%

**智慧水晶**：智力+3，力量-2

**守护之盾**：防御+4，幸运-3

**铁块头盔**：防御+2，攻击速度-2

**敏捷斗篷**：闪避率+2%，防御-5

**魔法披风**：闪避率+1%，攻速-2

**要害箭头**：暴击率+2%，暴击伤害-5%

**精准符文**：暴击率+1%，力量-2，智力-2

**毁灭卷轴**：暴击伤害+5%，暴击率-3%

**嗜血之剑**：暴击伤害+2%，智力-3

**疾步之靴**：移动速度+3，最大生命-20

**迅捷药水**：移动速度+2，攻击速度-2

**幸运药水**：幸运+7，收入-5

**幸运草**：幸运+3，移动速度-3

**诅咒金币**：收入+7，幸运-5

**纯金锭：**收入+5，生命-20

血之契约：最大生命+40，但是下个波次开始时，生命值只有20%

文具（3）：击败怪物获得的经验增加20%。

生命番茄（6）：血瓶的治疗效果增加5%。

士兵棋子：下一场战斗伤害增加10%，在战斗结束后自动出售该道具

大金牙（2）：出售道具或者武器时，额外获得（2+波次/4）个金币

经验瓶：立即获得1000点经验值

普通会员（1）：商店武器售价降低5%

### **稀有道具 13**

**一些通用的**

**科技装甲**：生命+30，防御+5，智力-2

**敏捷项链**：攻速+4，移动速度+3，防御-2

**力量宝石**：力量+6，生命+10，闪避率-2%

**智慧戒指**：智力+6，攻速+2，暴击率-2%

**重装钢铠**：防御+6，暴击率+2%，移动速度-3

**魔导书**：闪避率+3%，智力+3，最大生命-10

**放大镜**：暴击率+3%，暴击伤害+5%，力量-2

**冰砾**：暴击伤害+8%，力量+3，攻击速度-2

**陨铁鸟的羽毛**：移动速度+4，闪避+2%，暴击伤害-3%

**幸运骰子**：幸运+9，暴击率+3，闪避率+1%，收入-7

**第一袋金**：收入+12，力量+2，智力+2，幸运-8

金币护符（2）：每次受到攻击时，有10%的概率生成1枚金币。

吸金戒指（3）：收入+2，拾取金币的范围增大。

主教棋子：下一场战斗伤害增加40%，在战斗结束后自动出售该道具

破敌战斧（5）：释放主动技能后，5s内造成的伤害额外提高4%

陨铁鸟（5）：释放主动技能后，5s内移动速度增加10%

光轮2000（5）：闪避后，5s内受到到的伤害减少4%

巫师帽（2）：暴击时有10%的概率生成1枚金币

知识药剂（2）：拾取血瓶时，获得2000经验值

猩红收割者（2）：怪物掉落血瓶的概率提高50%

金盏花（1）：每拥有5金币，在战斗开始时在附近生成1金币（最多生成50个）

采蘑菇的兔兔（1）：对蘑菇怪人造成的伤害增加100%

蘑菇诱饵（3）：战斗开始时，在随机位置召唤一个蘑菇怪人。

复仇护手（1）：每次受到攻击后，增加2%的暴击率，最多增加20%，且不会超过暴击率上限，持续5s。

橡木棺椁（5）：所有敌人减缓1%的移动速度。

嗜血剑（4）：每次击败一个敌人时，恢复5点生命值。

生命的旅程（5）：每移动200距离，恢复2%的血量

一杯啤酒（2）：闪避率上限+5%，闪避率+2%

普通南瓜（2）：暴击率上限+5%，暴击率+2%

坩埚（1）：出售武器后，可以获得一次免费的刷新次数（次数不会保留）

女巫坩埚（3）：进阶武器后，智力+1，力量+1

半满坩埚（3）：进阶武器后，获得2000经验值

满满的坩埚（3）：出售武器或道具后，防御+1

高级会员（1）：商店武器的售价和道具的售价降低5%

惬意烟斗（5）：每刷新5次商店，最大生命增加2

### **史诗道具 5**

**一些通用的**

深渊龙铠：最大生命+40，防御+7，闪避率+2，攻击速度-4

全能经文：力量+10，智力+10，暴击率+2%，防御-8

追风符文：攻击速度+3，移动速度+3，最大生命+10，暴击率-3%

诅咒药水：暴击率+5%，暴击伤害+7%，攻击速度+2，幸运-4

圣诞礼物：收入+7，幸运+5，暴击伤害+5%，最大生命-50

皇后棋子：下一场战斗伤害增加80%，在战斗结束后自动出售该道具

金苹果（2）：每拥有20金币，战斗时造成的伤害增加2.5%

幸运护符（1）：每拥有20点幸运，战斗时的暴击率增加1%，闪避率增加1%，（最多增加10%，且不会超过暴击率和闪避率上限）

时间加速器（1）：战斗每过5秒，战斗时的攻击速度增加5

破釜沉舟（3）：当生命值低于50%时，战斗时暴击伤害增加50%

钢铁之心（1）：每次受到伤害，战斗时的防御力增加1（最多增加30）

反击之盾（2）：每次受到伤害，有50%（100%）的概率让攻击者受到50%反弹的伤害

力量代价（2）：造成的伤害增加100%，但是受到的伤害也增加50%

黄金奇异果（1）：拾取金币时，有20%的概率恢复（10+10%收入）的生命值

愈术符咒（3）：释放主动技能后，恢复（英雄等级/2）%最大生命的生命值

暴击领悟（2）：每拥有1%的暴击率，击败怪物获得的经验增加1%

闪击披风（1）：每次闪避成功后，下一次攻击造成双倍伤害。

一杯神秘啤酒（2）：闪避率上限+10%，闪避率+5%

邪恶南瓜（2）：暴击率上限+10%，暴击率+5%

商贾之印（1）：商店的第一次刷新免费

VIP会员（1）：商店武器的售价减少5%，道具的售价降低10%，每次刷新需要的金币减少10%

投资回报（2）：每消耗100金币，收入增加2

生命之金：将所有的金币1：2转换为最大生命。

魔术牌（1）：每次刷新商店，有1%的概率本次所有道具或武器免费购买。

### **传说道具 10**

自然之力：最大生命+20，攻速+3，力量+5，智力+5，防御+3，闪避率+2%，暴击率+2%，暴击伤害+4%，移动速度+3，幸运+4

收集之握：吸取所有的掉落物品。

筹码50：每次刷新商店时，有50%的概率使下次刷新免费。

时间之瓶：攻击速度会影响技能的冷却时间（但不会高于原有的时间）。冷却时间 /=攻击速度。

财运背包：每拾取300金币，获得一个随机品质的宝箱。（95%稀有，4%史诗，1%传说）

双倍奇迹：怪物死亡时，有几率（暴击率）使得经验值和金币数量变为两倍，boss除外。

千年天秤：你的力量和智力的数值永远保持一致为两者中较高的一个。

极限猎手：你的闪避率和暴击率上限提高为80%，闪避+10%，暴击+10%

不灭圣辉：当你死亡时，立刻复活并恢复全部生命，并重置技能冷却，只能触发一次。

永恒血冠：当拾取血瓶时，溢出恢复生命的10%将转换为最大生命。

# 教程

> 自定义Toolbar
> 

[Unity编辑器拓展之自定义UnityToolbar_imguicontainer-CSDN博客](https://blog.csdn.net/u011428080/article/details/106689329/)

# bug单

1. boss会把玩家挤出屏幕外部
2. 加载界面点击技能部位时，进游戏会自动释放一次技能
3. ~~机械枪兵死亡后仍然能发射子弹~~
4. ~~有概率刷出两个相同的物品，会超过最大持有数~~
5. 对于伤害计算系统存在问题，伤害系统应该单独作为一个模块
6. ~~血之契约读取存档，进入游戏后血条不会更新，勇者会显示背水一战的特效。猜测和updatebloodbar有关。~~
7. 移动速度莫名会减少20%，猜测和陨铁鸟之力的buff有关
8. 死亡后不展示结束界面（有时候，背水一战）

# 日报

### 2024.8.17

> 进度
> 
1. 游戏界面UI完成
2. 血条UI完成
3. 商店UI完成
4. 游戏界面UI完成
5. 小修改
6. 文本修改

> 遇到的问题
> 
1. TextMeshPro使用GetComponent<TextMeshPro>()无法获取到组件

解决：使用GetComponent<TextMeshProUGUI>()就可以了

### 2024.8.16

> 进度
> 
1. MenuSceneUI制作完成
2. LoadSceneUI制作完成
3. 经验值UI 完成

### 2024.8.15

> 进度
> 
1. 设计新角色
2. 制作完成新角色
3. 找UI资源
4. MenuScene部分UI制作

### 2024.8.14

> 进度
> 
1. 战斗时的数值显示完成
2. 跑通整体流程，并试玩修了一些bug

### 2024.8.13

> 进度
> 
1. 存档系统UI完成
2. 存档系统完成

### 2024.8.11

> 进度
> 
1. 修改了锤子的一些参数
2. 完成开宝箱的界面
3. 完成无尽模式的设计与实现

![Untitled](SurvivorRogue%203d87a547bb4844f89fa98edb9f2efab7/Untitled.png)

### 2024.8.10

> 进度
> 
1. 技能随人物选择更换图标
2. 重构了勇者之剑的脚本4合一

### 2024.8.9

> 进度
> 
1. 设计道具81-97
2. 完成道具81-97，至此完成所有的道具

### 2024.8.8

> 进度
> 
1. 完成道具65-70
2. 修了一些bug
3. 设计道具71-80
4. 完成道具71-80，完成所有的稀有道具

### 2024.8.6

> 进度
> 
1. 完成道具61-64

### 2024.8.5

> 进度
> 
1. 设计道具
2. 完成道具57-60
3. 修改暴击显示以及DamageInfo中的bug

### 2024.8.4

> 进度
> 
1. 完成道具48-56

### 2024.8.2

> 进度
> 
1. 完成道具时间之瓶、财运背包、双倍奇迹

### 2024.8.1

> 进度
> 
1. 修复了bug3
2. 修复了bug4
3. 完成道具 筹码50

### 2024.7.31

> 进度
> 
1. 修复了玩家在回合结束时使用技能时会导致collider不消失的bug。

### 2024.7.30

> 进度
> 
1. 修复枪兵子弹无法发射的bug
2. 修复电眼仔死亡后激光仍然存在的bug
3. 新增勇者的主动技能可以抵挡所有飞行物
4. 修复boss的一些bug
5. 修复玩家的一些bug
6. 做了史诗和传说的通用道具

### 2024.7.29

> 进度
> 
1. 做了新的道具蓝色的通用道具
2. 商店界面新增了rank标记

### 2024.7.28

> 进度
> 
1. 做了武器斧子和弓箭（武器暂告一段落）
2. 所有的wave都设置完毕（一个一个输入真累，如果要改的话，后面要做一个图形界面）

### 2024.7.27

> 进度
> 
1. wave，drop设置一下，整体流程跑通，设计一个wave的表达方式（这个东西可以做成一个）
2. 修改一下经验值系统
3. 做了两把武器锤子和法杖

### 2024.7.26

> 进度
> 
1. 实现一下随波次敌人数值增长

### 2024.7.25

> 进度
> 
1. 设计新的boss敌人变异甲虫（敌人暂告一段落）

### 2024.7.24

> 进度
> 
1. 设计新的敌人机械枪兵、电眼仔

### 2024.7.23

> 进度
> 
1. 设计一个新的敌人机械蚯蚓

### 2024.7.22

> 进度
> 
1. 设计一个新的敌人蘑菇怪人

> 遇到的问题
> 
1. 一个特别诡异的bug，当我在animation中修改gameobject的active为false时，最后在怪物死亡的时候将所有的子物体都设置active为false后会自动回到true，目前并不知道为什么会这样，只知道是animation的原因。

解决方案：调用animation事件方法，在代码里控制gameobject的显影。

### 2024.7.19

> 进度
> 
1. 设计一个新的敌人妖怪书
2. 设计一个新的敌人蝙蝠群

### 2024.7.18

> 进度
> 
1. 接着修一下人物死亡的bug
2. 修一下幸运补正的bug
3. 设计一个新的敌人尖刺蜗牛完成

### 2024.7.17

> 进度
> 
1. 22个基础道具完成
2. 和幸运属性有关的逻辑完成
3. 修一下人物死亡的bug

### 2024.7.16

> 进度
> 
1. 商店刷新逻辑的修改
2. 和幸运属性有关的逻辑
3. 新道具血之契约

### 2024.7.15

> 进度
> 
1. 设计商店刷新逻辑的修改
2. 设计和幸运属性有关的逻辑

### 2024.7.14

> 进度
> 
1. 增加购买时直接合成的方法
2. 修复初始可选的武器设置
3. 修复武器自动旋转的bug
4. 修改玩家消失的逻辑，以及导致的一系列的bug
5. 完成item金币护符

### 2024.7.13

> 进度
> 
1. 勇者之剑（4个等级）完成

### 2024.7.12

> 进度
> 
1. buff系统完成
2. himmel被动完成，特效完成

### 2024.7.11

> 进度
> 
1. 学习buff系统

### 2024.7.10

> 进度
> 
1. 解决了游戏结束切换到Scene时GameManager中的state为空的bug
2. 道具工厂实现

### 2024.7.9

> 进度
> 
1. 掉落物完成
2. 掉落物拾取完成

### 2024.7.8

> 进度
> 
1. 完成经验系统

### 2024.7.7

> 进度
> 
1. 攻击伤害的数值计算等

### 2024.7.6

> 进度
> 
1. 怪物，武器的数值设置完成。

### 2024.7.4

> 进度
> 
1. tplenemy,tplwave表实现
2. 敌人生成实现

### 2024.7.3

> 进度
> 
1. 武器升级，出售功能
2. GameOver界面（清除数据功能未实现）

### 2024.7.2

> 进度
> 
1. 修改购买后武器道具重排的bug
2. 修改武器可以无限购买的bug
3. 武器合成和出售界面（PopUpWindow）

### 2024.7.1

> 进度
> 
1. 购买武器道具界面功能

### 2024.6.30

> 进度
> 
1. 设计一些人物，道具，武器
2. 选择武器道具界面

### 2024.6.27

> 进度
> 
1. 编写人物属性的部分
2. BuyPanelUI
3. 一些tpl配置

### 2024.6.26

> 进度
> 
1. EnemySpawner写完了
2. 写BuyState

> 遇到的问题
> 
1. 在Destory某个游戏物体后，该物体脚本中的协程是否会停止。答案：会停止。

### 2024.6.23

> 进度
> 
1. 状态机FSM管理游戏进程

![Untitled](SurvivorRogue%203d87a547bb4844f89fa98edb9f2efab7/Untitled%201.png)

1. 实现怪物生成

> 遇到的问题
> 
1. 在刚loadScene完成后，此时MonoBehavior还没有调用Start方法，导致某些UI无法找到。

把UI的初始化写在Awake中

### 2024.6.22

> 进度
> 
1. 游戏界面每波倒计时
2. 状态机FSM管理游戏进程

> 遇到的问题
> 

### 2024.6.21

> 进度
> 
1. 设计了一下人物、怪物、武器、道具的属性等
2. 跑通一下游戏的流程

> 遇到的问题
> 

### 2024.6.20

> 进度
> 
1. 管理所有Prefab
2. 重构单例对象
3. 让andriod平台能够读取xml
4. selectPanel实现
5. 把selectweaponitem也搞了

> 遇到的问题
> 
1. 安卓平台文件路径和读取方式和win不一样

解决：

使用UnityWebRequest进行读取

### 2024.6.19

> 进度
> 
1. 给unity添加Tools，打开模板表工具
2. 实现解析xml模板表的方法

> 遇到的问题
> 
1. 解析xml真麻烦

解决：采用Xml序列化的方式来解析。

1. 解析速度较慢

解决：考虑可能在游戏开始的时候把所有的xml都进行解析。

### 2024.6.18

> 进度
> 
1. 实现武器＆道具的选择界面
2. 实现滚动Text
3. 考虑一下怎么读表

> 遇到的问题
> 
1. 没想好怎么读表

设计：

![Untitled](SurvivorRogue%203d87a547bb4844f89fa98edb9f2efab7/Untitled%202.png)

### 2024.6.17

> 进度
> 
1. Scene的跳转以及异步加载Scene
2. 人物选择界面的实现（DoTween）

> 遇到的问题
> 
1. 使用异步加载时判断 `op.progress >= 0.9` 永远都是false

解决：

改为`op.progress >= 0.9f` ，应该是0.9默认为double类型导致精度缺失。

### 2024.6.16

> 进度
> 
1. 完成武器的攻击（调整飞行方向，解决人物转向导致武器也会转向的bug）
2. 实现一个伤害跳字的效果
3. 游戏开始界面的实现，Scene的跳转

> 遇到的问题
> 
1. 修改剑的方向后，使用Translate方法剑的飞行轨迹会绕圈

解决：

`Transform.Translate` 方法中的 `Space.World` 和 `Space.Self` 参数决定了移动的参考系（坐标系）。

- `Space.World`：使用世界坐标系。此时，移动的方向是相对于世界的全局坐标系，不受物体当前旋转的影响。
- `Space.Self`：使用局部坐标系。此时，移动的方向是相对于物体自身的局部坐标系，受物体当前旋转的影响。

所以如果要使用 `Translate` 方法，就必须要用世界坐标系。或者用 `Vector2.MoveTowards` 方法

1. Text显示需要再Canvas，很麻烦

解决：

使用TextMeshPro，直接将TMP组件加在物体上就可以直接在相机中展示了。

### 2024.6.15

> 进度
> 
1. 实现玩家的死亡效果
2. 重构Player脚本
3. 大致实现武器的攻击（飞行，扣血等）

> 遇到的问题
> 
1. 当前gameobject被active被设置为false后，update start 协程等方法都不会继续运行。

解决：

- 由于我要实现武器攻击先消失，过delay时间后再显示，所以不能直接把gameobject的active设置为false，用协程就没办法自动显示。
- 所以我只把他的component中的sprite render和collider给禁用掉。

### 2024.6.14

> 进度
> 
1. 重构了Enemy类。
2. 把行为树重新修改了：把所有的动作都集中写在了Enemy脚本中，而不是零散的分布在行为树中，行为树中只调用Enemy中的方法。

> 遇到的问题
> 
1. 行为树中怎么直接获取到脚本对象

解决：

- 我直接用BaseAction继承了Action，再用自己写的方法去继承BaseAciton，在BaseAction中，我定义脚本变量，这样每个节点就可以直接用该变量。

### 2024.6.13

> 进度
> 
1. 实现主角释放技能冷却的功能

> 遇到的问题
> 
1. collider的物体被重新enable后，如果人物的collider和它没有发生相对位移，会导致onTriggerEnter方法不会被触发。

解决：

- 最笨的方法：当collider被重新enable后，我让他移动0.01。

### 2024.6.12

> 进度
> 
1. 实现了血条以及敌人的死亡效果

> 遇到的问题
> 
1. 人物运动时由于修改了scale.x的正负，导致血条会跟着变化

解决：

- 使用LookAt方法，让UI强制朝向摄像机，但是得把scale的变化改成rotation的变化。而且解决并不完整，仍然会存在闪烁的现象。
- 使用最简单的方法就是，在人物转向时，手动再把UI的scale再转回去。

### 2024.6.11及之前

### 实现摇杆

使用ScrollView（继承ScrollRect脚本）实现摇杆功能

```csharp
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.EventSystems;
using UnityEngine.UI;

public class JoyStickController : ScrollRect
{
    // 半径
    private float radius;

    // 箭头
    private Transform imageArrowTrans;

    public override void OnDrag(PointerEventData eventData)
    {
        base.OnDrag(eventData);
        Vector2 dragVec = content.anchoredPosition.normalized;
        GameManager.Instance.setMoveDir(dragVec);
    }

    public override void OnEndDrag(PointerEventData eventData)
    {
        base.OnEndDrag(eventData);
        GameManager.Instance.setMoveDir(Vector2.zero);
    }
}

```